% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api_one_to_many.R
\name{motis_one_to_many}
\alias{motis_one_to_many}
\title{Calculate one-to-many or many-to-one street-level routes}
\usage{
motis_one_to_many(
  one,
  one_id_col = "id",
  many,
  many_id_col = "id",
  mode = c("WALK", "BIKE", "CAR"),
  arrive_by = FALSE,
  max = 7200,
  maxMatchingDistance = 1000,
  ...,
  output = c("data.frame", "raw_list")
)
}
\arguments{
\item{one}{The single origin (when \code{arrive_by = FALSE}) or destination
(when \code{arrive_by = TRUE}). Can be a data frame/tibble with coordinate
columns, an \code{sf} object with a single POINT geometry, or a numeric
vector/matrix (\code{lon}, \code{lat}).}

\item{one_id_col}{The name of the column in \code{one} to use for identifying
the point in the output. Defaults to \code{"id"}.}

\item{many}{The multiple destinations (when \code{arrive_by = FALSE}) or origins
(when \code{arrive_by = TRUE}). Can be a data frame/tibble with coordinate
columns, an \code{sf} object with POINT geometry, or a numeric matrix
(\code{lon}, \code{lat}).}

\item{many_id_col}{The name of the column in \code{many} to use for identifying
column, a sequence of numbers is used.}

\item{mode}{The routing profile to use. Defaults to \code{"WALK"}.}

\item{arrive_by}{Logical. If \code{FALSE} (the default), calculates routes from
\code{one} to \code{many}. If \code{TRUE}, calculates routes from \code{many} to \code{one}.}

\item{max}{maximum travel time in seconds}

\item{maxMatchingDistance}{maximum matching distance in meters to match geo coordinates to the street network}

\item{...}{
  Arguments passed on to \code{\link[motis.client:mc_oneToMany]{motis.client::mc_oneToMany}}
  \describe{
    \item{\code{elevationCosts}}{Optional. Default is \code{NONE}.

Set an elevation cost profile, to penalize routes with incline.
\itemize{
\item \code{NONE}: No additional costs for elevations. This is the default behavior
\item \code{LOW}: Add a low cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if small detours are required.
\item \code{HIGH}: Add a high cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if larger detours are required.
}

As using an elevation costs profile will increase the travel duration,
routing through steep terrain may exceed the maximal allowed duration,
causing a location to appear unreachable.
Increasing the maximum travel time for these segments may resolve this issue.

Elevation cost profiles are currently used by following street modes:
\itemize{
\item \code{BIKE}
}

Allowed values: NONE, LOW, HIGH.}
    \item{\code{distance}}{Optional. Default is \code{false}.
If true, the response includes the distance in meters
for each path. This requires path reconstruction and
may be slower than duration-only queries.}
    \item{\code{.return_as}}{A string specifying the return format. Defaults to 'list'. Options are 'list' for a parsed R list, 'raw' for the raw httr2_response object, or 'string' for the raw JSON string.}
    \item{\code{.json_parser}}{A string specifying which parser to use when .return_as = 'list'. Defaults to 'RcppSimdJson' (faster) or 'jsonlite'. Beware that their output may differ slightly.}
    \item{\code{.headers}}{A named list of extra HTTP headers to add to the request. If no 'Accept' header is provided anywhere, 'Accept: \emph{/}' will be sent by default.}
    \item{\code{.auth}}{An authentication token or method (e.g., a bearer token string).}
    \item{\code{.throttle_rate}}{A number to pass to \code{httr2::req_throttle()} to limit the rate of requests. For example, \code{15/60} means 15 requests per minute. This overrides any default rate set at client generation time.}
    \item{\code{.build_only}}{A logical. If TRUE, the function will build and return the httr2_request object without performing it. Defaults to FALSE.}
    \item{\code{.server}}{A string to override the base URL for this specific request. If provided, it will be used instead of the default server URL.}
    \item{\code{.referer}}{A string to set the Referer HTTP header.}
    \item{\code{.req_options}}{A named list of curl options passed to \code{httr2::req_options()}. Useful for timeouts, proxies, SSL, etc.}
    \item{\code{.handle_response}}{A function taking an \code{httr2_response} and returning a value. If supplied, it overrides \code{.return_as} / \code{.json_parser} handling. See helpers like \code{oa3_content_or_stop()}.}
    \item{\code{.json_auto_unbox}}{Logical. If TRUE, JSON bodies are encoded with \code{auto_unbox = TRUE} (jsonlite). Defaults to FALSE unless overridden.}
    \item{\code{.paginate}}{A logical, character string, or function to enable pagination. If TRUE (or "link_header"), uses Link headers. Other options: "page_param", "cursor_param", or a custom function. See \code{oa3_paginate()}.}
  }}

\item{output}{The desired output format. One of:
\itemize{
\item \code{"data.frame"} (default): A tidy data frame with travel times and distances.
\item \code{"raw_list"}: The raw parsed JSON response as a list.
}}
}
\value{
Depending on the \code{output} parameter, a \code{data.frame} or a list.
The data frame will contain columns:
\itemize{
\item \code{from_id}: identifier of the origin
\item \code{to_id}: identifier of the destination
\item \code{duration_s}: travel time in seconds
\item \code{distance_m}: travel distance in meters (only included if \code{distance = TRUE} in \code{...})
}
}
\description{
This function is a user-friendly wrapper for the MOTIS \code{one-to-many} street
routing API. It computes travel time and distance from a single origin to
multiple destinations (or from multiple origins to a single destination)
using a specified travel mode (e.g., walking, cycling, or driving).
}
\details{
This function uses a \code{POST} request to the MOTIS server, allowing for a large
number of destinations (1000+) without hitting URL length limitations.
}
