% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api_one_to_many.R
\name{motis_one_to_many}
\alias{motis_one_to_many}
\title{Calculate one-to-many or many-to-one street-level routes}
\usage{
motis_one_to_many(
  one,
  one_id_col = "id",
  many,
  many_id_col = "id",
  mode = c("WALK", "BIKE", "CAR"),
  arrive_by = FALSE,
  max = 7200,
  maxMatchingDistance = 1000,
  ...,
  output = c("data.frame", "raw_list")
)
}
\arguments{
\item{one}{The single origin (when \code{arrive_by = FALSE}) or destination
(when \code{arrive_by = TRUE}). Can be a character vector of an ID,
a data frame/tibble with coordinate columns, an \code{sf} object with a
single POINT geometry, or a numeric vector/matrix (\code{lon}, \code{lat}).}

\item{many}{The multiple destinations (when \code{arrive_by = FALSE}) or origins
(when \code{arrive_by = TRUE}). Can be a character vector of IDs, a data
frame/tibble with ID or coordinate columns, an \code{sf} object with POINT
geometry, or a numeric matrix (\code{lon}, \code{lat}).}

\item{many_id_col}{The name of the column in \code{many} to use for identifying
the points in the output. Defaults to \code{"id"}. If the input has no such
column, a sequence of numbers is used.}

\item{mode}{The routing profile to use. Defaults to \code{"WALK"}.}

\item{arrive_by}{Logical. If \code{FALSE} (the default), calculates routes from
\code{one} to \code{many}. If \code{TRUE}, calculates routes from \code{many} to \code{one}.}

\item{...}{
  Arguments passed on to \code{\link[motis.client:mc_oneToMany]{motis.client::mc_oneToMany}}
  \describe{
    \item{\code{max}}{maximum travel time in seconds}
    \item{\code{maxMatchingDistance}}{maximum matching distance in meters to match geo coordinates to the street network}
    \item{\code{elevationCosts}}{Optional. Default is \code{NONE}.

Set an elevation cost profile, to penalize routes with incline.
\itemize{
\item \code{NONE}: No additional costs for elevations. This is the default behavior
\item \code{LOW}: Add a low cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if small detours are required.
\item \code{HIGH}: Add a high cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if larger detours are required.
}

As using an elevation costs profile will increase the travel duration,
routing through steep terrain may exceed the maximal allowed duration,
causing a location to appear unreachable.
Increasing the maximum travel time for these segments may resolve this issue.

Elevation cost profiles are currently used by following street modes:
\itemize{
\item \code{BIKE}
}

Allowed values: NONE, LOW, HIGH.}
    \item{\code{.return_as}}{How to return the response. One of 'list' (default), 'string', or 'raw'.}
    \item{\code{.json_parser}}{JSON parser when \code{.return_as = 'list'}. One of 'RcppSimdJson' (default) or 'jsonlite'.}
    \item{\code{.headers}}{Named list of additional HTTP headers to include.}
    \item{\code{.auth}}{Bearer token string or a function \code{function(req) req} to apply custom auth.}
    \item{\code{.throttle_rate}}{Requests per second (numeric). If set, throttling is applied.}
    \item{\code{.build_only}}{If TRUE, return the unperformed request object.}
    \item{\code{.server}}{Override the server URL for this call.}
    \item{\code{.endpoint}}{A string to override the path for this specific request (e.g., '/v2/users/{id}'). If provided, it will be used instead of the default path from the specification.}
    \item{\code{.referer}}{Optional Referer header value.}
    \item{\code{.req_options}}{Named list of curl options passed to \code{httr2::req_options()}.}
    \item{\code{.handle_response}}{Optional function \code{function(resp) ...} to post-process the response.}
    \item{\code{.json_auto_unbox}}{If TRUE (default), auto-unbox scalar JSON values for request bodies.}
  }}

\item{output}{The desired output format. One of:
\itemize{
\item \code{"data.frame"} (default): A tidy data frame with travel times and distances.
\item \code{"raw_list"}: The raw parsed JSON response as a list.
}}
}
\value{
Depending on the \code{output} parameter, a \code{data.frame} or a list.
The data frame will contain columns for the identifier of each point in \code{many},
the \code{duration_seconds}, and the \code{distance_meters}.
}
\description{
This function is a user-friendly wrapper for the MOTIS \code{one-to-many} street
routing API. It computes travel time and distance from a single origin to
multiple destinations (or from multiple origins to a single destination)
using a specified travel mode (e.g., walking, cycling, or driving).
}
