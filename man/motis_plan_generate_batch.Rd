% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/motis_plan_generate_batch.R
\name{motis_plan_generate_batch}
\alias{motis_plan_generate_batch}
\title{Generate MOTIS Batch Query File}
\usage{
motis_plan_generate_batch(
  from,
  to,
  output_file,
  time = Sys.time(),
  arrive_by = FALSE,
  from_id_col = "id",
  to_id_col = "id",
  all_pairs = FALSE,
  ...,
  append = FALSE,
  api_endpoint = "/api/v1/plan"
)
}
\arguments{
\item{from}{The origin location(s). Can be a character vector of station IDs,
a data frame/tibble with ID or coordinate columns, an \code{sf} object, or a
numeric matrix (\code{lon}, \code{lat}).}

\item{to}{The destination location(s). Same types as \code{from}.}

\item{output_file}{The path to the output text file.}

\item{time}{The departure or arrival time. Can be a single \code{POSIXct} object
(applied to all queries) or a vector of the same length as the number of
queries. Defaults to \code{Sys.time()}.}

\item{arrive_by}{Logical. If \code{TRUE}, \code{time} is treated as the arrival time.
Defaults to \code{FALSE}.}

\item{from_id_col}{Column name for station IDs in \code{from}. Defaults to \code{"id"}.}

\item{to_id_col}{Column name for station IDs in \code{to}. Defaults to \code{"id"}.}

\item{all_pairs}{Logical. If \code{TRUE}, generates queries for all combinations
of \code{from} and \code{to} (Cartesian product). If \code{FALSE} (default), \code{from} and
\code{to} must have the same length and are paired 1-to-1.}

\item{...}{Additional MOTIS API parameters (e.g., \code{directModes}, \code{maxTravelTime}).
Vector arguments (e.g. \code{c("WALK", "CAR")}) are automatically collapsed to
comma-separated strings. Parameters are validated against
\code{\link[motis.client:mc_plan]{motis.client::mc_plan()}} before generation begins.}

\item{append}{Logical. If \code{TRUE}, appends to \code{output_file} instead of
overwriting. Defaults to \code{FALSE}.}

\item{api_endpoint}{The API path. Defaults to \code{"/api/v1/plan"}.}
}
\value{
Invisibly returns the number of queries written to the file.
}
\description{
Efficiently constructs a text file of MOTIS routing queries for batch
processing. This function is designed for performance, using vectorised
operations to generate potentially millions of query URLs in seconds.
}
\examples{
\dontrun{
# Generate paired queries
origins <- data.frame(lat = c(59.3, 59.4), lon = c(18.0, 18.1))
dests <- data.frame(lat = c(59.5, 59.6), lon = c(18.2, 18.3))
motis_plan_generate_batch(origins, dests, "queries.txt")

# Generate all-pairs matrix
motis_plan_generate_batch(origins, dests, "matrix.txt", all_pairs = TRUE)
}
}
