% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/processx.R
\name{motis_prepare_data}
\alias{motis_prepare_data}
\title{Prepare MOTIS Data Directory}
\usage{
motis_prepare_data(
  work_dir = getwd(),
  osm_pbf,
  gtfs_files,
  echo_cmd = FALSE,
  echo = TRUE,
  spinner = TRUE
)
}
\arguments{
\item{work_dir}{A string specifying the directory where MOTIS commands will be
run and where the \code{data} and \code{config.yml} files will be stored. Defaults
to the current working directory.}

\item{osm_pbf}{A string. The path to the input OpenStreetMap \code{.osm.pbf} file.}

\item{gtfs_files}{A character vector of paths to the input GTFS \code{.zip} files.}

\item{echo_cmd}{A logical. If \code{TRUE}, prints the full command being run to the
console. Defaults to \code{FALSE}.}

\item{echo}{A logical. If \code{TRUE}, streams the stdout and stderr from the MOTIS
process to the console. Defaults to \code{TRUE}.}

\item{spinner}{A logical. If \code{TRUE}, shows a spinner in the console while
the process is running. Defaults to \code{TRUE}.}
}
\value{
A list with elements:
\item{work_dir}{The normalized path to the working directory.}
\item{logs}{A list containing the \code{processx::run} result objects for the
\code{config} and \code{import} steps.}
}
\description{
Runs the \verb{motis config} and \verb{motis import} commands to prepare a data
directory for the MOTIS server. This involves generating a configuration
file and preprocessing the OSM and GTFS data into a graph format.
}
\details{
This function requires that the \code{motis} executable is available on the system
\code{PATH}. You can install it using \code{motis_install()}. The function will first
create a \code{config.yml} file based on the provided data inputs and then run
the import process, which can be time-consuming depending on the size of
the datasets. The resulting graph data is stored in a \code{data} subdirectory
within the \code{work_dir}.
}
\examples{
\dontrun{
# Assuming 'aachen.osm.pbf' and 'gtfs.zip' are in the current directory
prep_result <- motis_prepare_data(
  work_dir = tempdir(),
  osm_pbf = "aachen.osm.pbf",
  gtfs_files = "gtfs.zip"
)
# This directory can now be used with motis_start_server()
server <- motis_start_server(work_dir = prep_result$work_dir)
motis_stop_server(server)
}
}
