% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api_one_to_all.R
\name{motis_one_to_all}
\alias{motis_one_to_all}
\title{Calculate reachable locations from a single point within a given travel time}
\usage{
motis_one_to_all(
  one,
  one_id_col = "id",
  time = Sys.time(),
  arrive_by = FALSE,
  max_travel_time = 90,
  ...,
  output = c("data.frame", "raw_list")
)
}
\arguments{
\item{one}{The single origin (when \code{arrive_by = FALSE}) or destination
(when \code{arrive_by = TRUE}). Can be a character vector of an ID,
a data frame/tibble with coordinate columns, an \code{sf} object with a
single POINT geometry, or a numeric vector/matrix (\code{lon}, \code{lat}).}

\item{one_id_col}{The name of the column in \code{one} to use for identifying
the point in the output. Defaults to \code{"id"}.}

\item{time}{The departure or arrival time. Can be a POSIXct object (like from
\code{Sys.time()}) or a character string in ISO 8601 format (e.g., "2025-08-15T15:11:00Z").
Defaults to the current time.}

\item{arrive_by}{Logical. If \code{FALSE} (the default), calculates routes from
\code{one} to all reachable stops. If \code{TRUE}, calculates routes from all
reachable stops to \code{one}.}

\item{max_travel_time}{Integer. The maximum travel time in minutes. Defaults to 120.}

\item{...}{
  Arguments passed on to \code{\link[motis.client:mc_oneToAll]{motis.client::mc_oneToAll}}
  \describe{
    \item{\code{maxTransfers}}{The maximum number of allowed transfers (i.e. interchanges between transit legs,
pre- and postTransit do not count as transfers).
\code{maxTransfers=0} searches for direct transit connections without any transfers.
If you want to search only for non-transit connections (\code{FOOT}, \code{CAR}, etc.),
send an empty \code{transitModes} parameter instead.

If not provided, the routing uses the server-side default value
which is hardcoded and very high to cover all use cases.

\emph{Warning}: Use with care. Setting this too low can lead to
optimal (e.g. the fastest) journeys not being found.
If this value is too low to reach the destination at all,
it can lead to slow routing performance.

In plan endpoints before v3, the behavior is off by one,
i.e. \code{maxTransfers=0} only returns non-transit connections.}
    \item{\code{minTransferTime}}{Optional. Default is 0 minutes.

Minimum transfer time for each transfer in minutes.}
    \item{\code{additionalTransferTime}}{Optional. Default is 0 minutes.

Additional transfer time reserved for each transfer in minutes.}
    \item{\code{transferTimeFactor}}{Optional. Default is 1.0

Factor to multiply minimum required transfer times with.
Values smaller than 1.0 are not supported.}
    \item{\code{maxMatchingDistance}}{Optional. Default is 25 meters.

Maximum matching distance in meters to match geo coordinates to the street network.}
    \item{\code{useRoutedTransfers}}{Optional. Default is \code{false}.

Whether to use transfers routed on OpenStreetMap data.}
    \item{\code{pedestrianProfile}}{Optional. Default is \code{FOOT}.

Accessibility profile to use for pedestrian routing in transfers
between transit connections and the first and last mile respectively.

Allowed values: FOOT, WHEELCHAIR.}
    \item{\code{elevationCosts}}{Optional. Default is \code{NONE}.

Set an elevation cost profile, to penalize routes with incline.
\itemize{
\item \code{NONE}: No additional costs for elevations. This is the default behavior
\item \code{LOW}: Add a low cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if small detours are required.
\item \code{HIGH}: Add a high cost for increase in elevation and incline along the way. This will prefer routes with less ascent, if larger detours are required.
}

As using an elevation costs profile will increase the travel duration,
routing through steep terrain may exceed the maximal allowed duration,
causing a location to appear unreachable.
Increasing the maximum travel time for these segments may resolve this issue.

The profile is used for routing on both the first and last mile.

Elevation cost profiles are currently used by following street modes:
\itemize{
\item \code{BIKE}
}

Allowed values: NONE, LOW, HIGH.}
    \item{\code{transitModes}}{Optional. Default is \code{TRANSIT} which allows all transit modes (no restriction).
Allowed modes for the transit part. If empty, no transit connections will be computed.
For example, this can be used to allow only \verb{METRO,SUBWAY,TRAM}.

Allowed values: WALK, BIKE, RENTAL, CAR, CAR_PARKING, CAR_DROPOFF, ODM, FLEX, TRANSIT, TRAM, SUBWAY, FERRY, AIRPLANE, METRO, BUS, COACH, RAIL, HIGHSPEED_RAIL, LONG_DISTANCE, NIGHT_RAIL, REGIONAL_FAST_RAIL, REGIONAL_RAIL, CABLE_CAR, FUNICULAR, AREAL_LIFT, OTHER.}
    \item{\code{preTransitModes}}{Optional. Default is \code{WALK}. The behavior depends on whether \code{arriveBy} is set:
\itemize{
\item \code{arriveBy=true}: Currently not used
\item \code{arriveBy=false}: Only applies if the \code{one} place is a coordinate (not a transit stop).
}

A list of modes that are allowed to be used from the last transit stop to the \code{to} coordinate. Example: \verb{WALK,BIKE_SHARING}.

Allowed values: WALK, BIKE, RENTAL, CAR, CAR_PARKING, CAR_DROPOFF, ODM, FLEX, TRANSIT, TRAM, SUBWAY, FERRY, AIRPLANE, METRO, BUS, COACH, RAIL, HIGHSPEED_RAIL, LONG_DISTANCE, NIGHT_RAIL, REGIONAL_FAST_RAIL, REGIONAL_RAIL, CABLE_CAR, FUNICULAR, AREAL_LIFT, OTHER.}
    \item{\code{postTransitModes}}{Optional. Default is \code{WALK}. The behavior depends on whether \code{arriveBy} is set:
\itemize{
\item \code{arriveBy=true}: Only applies if the \code{one} place is a coordinate (not a transit stop).
\item \code{arriveBy=false}: Currently not used
}

A list of modes that are allowed to be used from the last transit stop to the \code{to} coordinate. Example: \verb{WALK,BIKE_SHARING}.

Allowed values: WALK, BIKE, RENTAL, CAR, CAR_PARKING, CAR_DROPOFF, ODM, FLEX, TRANSIT, TRAM, SUBWAY, FERRY, AIRPLANE, METRO, BUS, COACH, RAIL, HIGHSPEED_RAIL, LONG_DISTANCE, NIGHT_RAIL, REGIONAL_FAST_RAIL, REGIONAL_RAIL, CABLE_CAR, FUNICULAR, AREAL_LIFT, OTHER.}
    \item{\code{requireBikeTransport}}{Optional. Default is \code{false}.

If set to \code{true}, all used transit trips are required to allow bike carriage.}
    \item{\code{requireCarTransport}}{Optional. Default is \code{false}.

If set to \code{true}, all used transit trips are required to allow car carriage.}
    \item{\code{maxPreTransitTime}}{Optional. Default is 15min which is \code{900}.
\itemize{
\item \code{arriveBy=true}: Currently not used
\item \code{arriveBy=false}: Maximum time in seconds for the street leg at \code{one} location.
}}
    \item{\code{maxPostTransitTime}}{Optional. Default is 15min which is \code{900}.
\itemize{
\item \code{arriveBy=true}: Maximum time in seconds for the street leg at \code{one} location.
\item \code{arriveBy=false}: Currently not used
}}
    \item{\code{.return_as}}{How to return the response. One of 'list' (default), 'string', or 'raw'.}
    \item{\code{.json_parser}}{JSON parser when \code{.return_as = 'list'}. One of 'RcppSimdJson' (default) or 'jsonlite'.}
    \item{\code{.headers}}{Named list of additional HTTP headers to include.}
    \item{\code{.auth}}{Bearer token string or a function \code{function(req) req} to apply custom auth.}
    \item{\code{.throttle_rate}}{Requests per second (numeric). If set, throttling is applied.}
    \item{\code{.build_only}}{If TRUE, return the unperformed request object.}
    \item{\code{.server}}{Override the server URL for this call.}
    \item{\code{.endpoint}}{A string to override the path for this specific request (e.g., '/v2/users/{id}'). If provided, it will be used instead of the default path from the specification.}
    \item{\code{.referer}}{Optional Referer header value.}
    \item{\code{.req_options}}{Named list of curl options passed to \code{httr2::req_options()}.}
    \item{\code{.handle_response}}{Optional function \code{function(resp) ...} to post-process the response.}
    \item{\code{.json_auto_unbox}}{If TRUE (default), auto-unbox scalar JSON values for request bodies.}
  }}

\item{output}{The desired output format. One of:
\itemize{
\item \code{"data.frame"} (default): A tidy data frame with travel times and transfers.
\item \code{"raw_list"}: The raw parsed JSON response as a list.
}}
}
\value{
Depending on the \code{output} parameter, a \code{data.frame} or a list.
The data frame will contain columns for the identifier of the \code{one} point,
the \code{target_id} of the reachable stop, the \code{duration_seconds}, and the
number of \code{transfers}.
}
\description{
This function is a user-friendly wrapper for the MOTIS \code{one-to-all} API.
It computes the travel time to all reachable transit stops from a single
origin (or to a single destination from all reachable stops) within a
specified maximum travel time.
}
